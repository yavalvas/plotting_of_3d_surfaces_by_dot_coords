#!/usr/bin/env python
# -*- coding: utf-8 -*-

import numpy as np
#from matplotlib import contour
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
from matplotlib.mlab import griddata
from matplotlib import cm, rcParams
# import pylab
# pylab.rcParams['xtick.major.pad']='80'
# pylab.rcParams['ytick.major.pad']='80'
# print pylab.rcParams.keys()
# rcParams['axes.formatter.use_locale']=1
X = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
     1e4, 1e4, 1e4, 1e4, 1e4, 1e4, 1e4, 1e4, 1e4, 1e4, 1e4, 1e4, 1e4, 
     1.5e4, 1.5e4, 1.5e4, 1.5e4, 1.5e4, 1.5e4, 1.5e4, 1.5e4, 1.5e4, 1.5e4, 1.5e4, 1.5e4, 1.5e4, 
     2e4, 2e4, 2e4, 2e4, 2e4, 2e4, 2e4, 2e4, 2e4, 2e4, 2e4, 2e4, 2e4, 
     2.5e4, 2.5e4, 2.5e4, 2.5e4, 2.5e4, 2.5e4, 2.5e4, 2.5e4, 2.5e4, 2.5e4, 2.5e4, 2.5e4, 2.5e4, 
     3e4, 3e4, 3e4, 3e4, 3e4, 3e4, 3e4, 3e4, 3e4, 3e4,  3e4, 3e4, 3e4,
     5e4, 5e4, 5e4, 5e4, 5e4, 5e4, 5e4, 5e4, 5e4, 5e4, 5e4, 5e4, 5e4,
     1e5, 1e5, 1e5, 1e5, 1e5, 1e5, 1e5, 1e5, 1e5, 1e5, 1e5, 1e5, 1e5,
     1.5e5, 1.5e5, 1.5e5, 1.5e5, 1.5e5, 1.5e5, 1.5e5, 1.5e5, 1.5e5, 1.5e5, 1.5e5, 1.5e5, 1.5e5,
     2e5, 2e5, 2e5, 2e5, 2e5, 2e5, 2e5, 2e5, 2e5, 2e5, 2e5, 2e5, 2e5, 
     2.5e5, 2.5e5, 2.5e5, 2.5e5, 2.5e5, 2.5e5, 2.5e5, 2.5e5, 2.5e5, 2.5e5, 2.5e5, 2.5e5, 2.5e5,
     3e5, 3e5, 3e5, 3e5, 3e5, 3e5, 3e5, 3e5, 3e5, 3e5, 3e5, 3e5, 3e5]
print len(X)
Y = [0, 100, 300, 500, 1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5152.2119,
     0, 100, 300, 500, 1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5152.2119,
     0, 100, 300, 500, 1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5152.2119,
     0, 100, 300, 500, 1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5152.2119,
     0, 100, 300, 500, 1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5152.2119,
     0, 100, 300, 500, 1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5152.2119,
     0, 100, 300, 500, 1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5152.2119,
     0, 100, 300, 500, 1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5152.2119,
     0, 100, 300, 500, 1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5152.2119,
     0, 100, 300, 500, 1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5152.2119,
     0, 100, 300, 500, 1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5152.2119,
     0, 100, 300, 500, 1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5152.2119]
print len(Y)
Z = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
     0, 0.000004526408566, 0.00001357975195, 0.00002263335847, 0.00004526671694, 0.00006789981228, 0.0000851572986, 0.0000959176384, 0.0001066780659, 0.0001174384057, 0.0001281987455, 0.0001389589976, 0.0001529949251,
     0, 0.000006789919832, 0.0000203697595, 0.00003394994999, 0.00006789989999, 0.0001018494992, 0.0001357994491, 0.0001697487852, 0.0001915627643, 0.0002077034494, 0.000223843696, 0.0002399839425, 0.0002610376584,
     0, 0.000009053431097, 0.00002716003016, 0.00004526671694, 0.00009053334617, 0.0001357995368, 0.0001810658152, 0.0002263317428, 0.0002715978458, 0.0003168635102, 0.0003405197333, 0.000362039799, 0.0003901113908,
     0, 0.00001131667923, 0.0000339500377, 0.00005658357159, 0.0001131667046, 0.0001697498377, 0.0002263325322, 0.0002829150513, 0.0003394973072, 0.0003960793877, 0.0004526613806, 0.0005051269176, 0.0005402160347,
     0, 0.00001358010279, 0.00004074022066, 0.00006790007541, 0.0001357999754, 0.0002036996123, 0.0002715991614, 0.0003394979212, 0.0004073967687, 0.0004752952653, 0.0005431935865, 0.0006110913815, 0.0006996588137,
     0, 0.00002263344618, 0.00006790025083, 0.0001131667046, 0.0002263331461, 0.0003394991491, 0.0004526646258, 0.0005658297517, 0.0006789945267, 0.0007921584247, 0.0009053224103, 0.001018485782, 0.001166098081,
     0, 0.00004526680465, 0.0001358003262, 0.0002263335847, 0.0004526665554, 0.0006789984736, 0.0009053294271, 0.001131659591, 0.001357988966, 0.001584317726, 0.001810645171, 0.002036971827, 0.002332196601,
     0, 0.00006790025083, 0.0002037006648, 0.0003395006402, 0.0006789999647, 0.001018497798, 0.001357994404, 0.001697489957, 0.002036984282, 0.002376476677, 0.002715968283, 0.003055458399, 0.003498295384,
     0, 0.0000905336093, 0.0002716005648, 0.0004526676956, 0.000905333374, 0.001357997561, 0.001810659907, 0.002263320322, 0.002715979423, 0.003168636593, 0.003621291922, 0.004073945321, 0.004664395044,
     0, 0.0001131669678, 0.0003395013418, 0.0005658350142, 0.001131667134, 0.001697497324, 0.002263325497, 0.00282915139, 0.003394975265, 0.003960796597, 0.004526616174, 0.005092433559, 0.005830495581,
     0, 0.0001358005894, 0.0004074012418, 0.0006790018066, 0.001358001333, 0.002036997789, 0.002715991877, 0.003394983246, 0.004073971721, 0.004752957916, 0.005431941654, 0.006110922674, 0.006996597434]
print len(Z)
xi = np.linspace(np.min(X), np.max(X))
yi = np.linspace(np.min(Y), np.max(Y))
zi = griddata(X, Y, Z, xi, yi)
plt.contour(xi, yi, zi)
fig = plt.figure()
#ax = Axes3D(fig)
ax = fig.add_subplot(111, projection='3d')
ax.set_title(u"Без дисперсии с n1=2.417, Umax = 5152.2119 до beta=1E-3")
#ax.set_ylim(0,1)
ax.set_xlabel(u'Vo[м/с]')
ax.set_ylabel(u'Vd[м/с]')
ax.set_zlabel(u'ddle[ед]')
zlabs = ['{:1.1E}'.format(i*1E-3) for i in xrange(0, 8, 1)]
ax.set_zticklabels(zlabs)
ax.set_zticks(zlabs)
#xlabs = ['{:1.0E}'.format(i*1E2) for i in xrange(0, 350, 50)]
xlabs = ['{:1.1E}'.format(i) for i in xrange(0, 350000, 50000)]
print xlabs
ax.set_xticklabels(xlabs)
ax.set_xticks(xlabs)
ylabs = ['{:1.0E}'.format(i*1E3) for i in xrange(0, 7)]
ax.set_yticklabels(ylabs)
ax.set_yticks(ylabs)

# ax.get_xaxis().get_major_formatter().set_useOffset(False)
# print dir(ax.get_xaxis().get_major_formatter())
xim, yim = np.meshgrid(xi, yi) 
Gx, Gy = np.gradient(zi) #gradient with respect to x and y
G = (Gx**2+Gy**2)**.5
 #gradient magitude
N = G/G.max()# normalize 0..1
ax.plot_surface(xim, yim, zi, rstride=1, cstride=1, facecolors=cm.jet(N), linewidth=0, antialiased=False, shade=False)
plt.show()